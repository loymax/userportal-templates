<div class="attach-card-modal">
    <div class="modal-header">
        <h2>{{'cards.attachCardModal.title' | translate}}</h2>
    </div>

    <notifications area="cardModal"></notifications>
    <div loader="confirmForm === undefined">
        <div ng-hide="confirmForm === undefined" class="hint modal-description row">
            <div>{{'cards.attachCardModal.separationImpossible' | translate}}</div>
            <div ng-if="confirmForm" ng-bind-html="'cards.attachCardModal.confirmCode' | translate"></div>
        </div>
        <form novalidate ng-if="confirmForm === false" name="attachCardForm" ng-submit="attachCardForm.$valid && startAttachCard()">
            <div class="modal-content-wrapper">
                <div class="modal-body">
                    <form-group label-text="{{'cards.attachCardModal.cardNumber' | translate}}">
                        <input
                            type="text"
                            ng-model="model.cardNumber"
                            ng-disabled="inProgress"
                            id="cardnumber" name="cardnumber"
                            required
                            autofocus>
                    </form-group>
                    <form-group label-text="{{'cards.attachCardModal.password' | translate}}">
                        <input
                            type="password"
                            ng-model="model.password"
                            ng-disabled="inProgress"
                            id="password" name="password"
                            autocomplete="off"
                            required>
                    </form-group>
                </div>
                <div class="modal-footer btn-container">
                    <div ng-hide="inProgress">
                        <button class="btn-cancel" type="button" ng-click="cancel()">
                            {{'buttons.cancel' | translate}}
                        </button>
                        <button type="submit">{{'buttons.next' | translate}}</button>
                    </div>
                    <inline-loader>inProgress</inline-loader>
                </div>
            </div>
        </form>

        <form novalidate ng-if="confirmForm" name="attachCardConfirmForm"
              ng-submit="attachCardConfirmForm.$valid && confirm()">
            <div class="modal-content-wrapper">
                <div class="modal-body">
                    <form-group label-text="{{'cards.attachCardModal.code' | translate}}">
                        <input type="text"
                               ng-model="model.confirmCode"
                               ng-disabled="inProgress"
                               id="confirmCode" name="confirmCode"
                               required
                               autofocus>
                    </form-group>
                    <div ng-hide="inProgress">
                        <a ng-click="sendConfirmCode()">{{'cards.attachCardModal.resendConfirmCode' | translate}}</a>
                    </div>
                </div>
                <div class="modal-footer btn-container">
                    <div ng-hide="inProgress">
                        <button class="btn-cancel" ng-click="cancelAttachCard()" type="button">
                            {{'buttons.cancel' | translate}}
                        </button>
                        <button type="submit">{{'cards.actions.attach' | translate}}</button>
                    </div>
                    <inline-loader>inProgress</inline-loader>
                </div>
            </div>
        </form>
    </div>
</div>
